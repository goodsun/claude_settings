---
description: 現在のブランチでコミットした変更を変更容易性・可読性の観点からレビュー
---

現在のブランチで**コミット済みの変更**を、変更容易性と可読性の観点からレビューしてください。

## 手順

1. まず以下のコマンドで、stagingブランチとの差分ファイル一覧を取得してください：
   ```
   git diff --name-only staging...HEAD
   ```

2. 次に、変更内容の詳細を確認してください：
   ```
   git diff staging...HEAD
   ```

3. 変更されたファイルを読み込み、レビューを実施してください

---

## レビュー観点

### 1. 変更容易性 (Modifiability)

#### 関心の分離 (Separation of Concerns)
- 単一責任原則（SRP）が守られているか
- レイヤー間の責務が明確か（handler / service / repository）
- ビジネスロジックとインフラ層が分離されているか

#### 依存関係 (Dependencies)
- 依存の方向が適切か（上位層 → 下位層）
- インターフェースによる抽象化がされているか
- 循環依存がないか

#### 凝集度と結合度 (Cohesion & Coupling)
- 高凝集：関連する機能がまとまっているか
- 低結合：モジュール間の依存が最小限か
- 変更の影響範囲が局所化されているか

#### 拡張性 (Extensibility)
- Open-Closed原則が守られているか
- 新機能追加時に既存コードの変更が最小限か

### 2. 可読性 (Readability)

#### 命名 (Naming)
- 変数・関数名が意図を表現しているか
- 省略形を避け、明確な名前か
- 一貫した命名規則
- 動詞プレフィックスの適切な使い分け:
  - `get`: 単純な取得、同期的、計算コスト低い
  - `fetch`: ネットワーク/DB/ファイルI/O、非同期が多い
  - `extract`: 入力データを解析・加工して一部を取り出す

#### 構造 (Structure)
- 関数の長さは適切か（目安: 30行以内）
- ネストの深さは適切か（目安: 3段以内）
- 早期リターンを活用しているか

#### コメント (Comments)
- WHYを説明するコメントがあるか
- 複雑なロジックに適切な説明があるか

#### 一貫性 (Consistency)
- コードスタイルが統一されているか
- エラーハンドリングパターンの一貫性

---

## 出力フォーマット

### 変更ファイル一覧

レビュー対象のファイルを列挙

### 変更容易性: [A/B/C/D]

| 観点 | 評価 | 指摘事項 |
|------|------|----------|
| 関心の分離 | ○/△/× | 具体的な指摘 |
| 依存関係 | ○/△/× | 具体的な指摘 |
| 凝集度・結合度 | ○/△/× | 具体的な指摘 |
| 拡張性 | ○/△/× | 具体的な指摘 |

### 可読性: [A/B/C/D]

| 観点 | 評価 | 指摘事項 |
|------|------|----------|
| 命名 | ○/△/× | 具体的な指摘 |
| 構造 | ○/△/× | 具体的な指摘 |
| コメント | ○/△/× | 具体的な指摘 |
| 一貫性 | ○/△/× | 具体的な指摘 |

### 改善提案（優先度順）

1. [高] ファイル名:行番号 - 具体的な改善案
2. [中] ファイル名:行番号 - 具体的な改善案
3. [低] ファイル名:行番号 - 具体的な改善案

### 良い点

- 良い設計・実装があれば記載

---

## 評価基準

- **A**: 優れている（改善不要）
- **B**: 良好（軽微な改善余地あり）
- **C**: 要改善（明確な問題あり）
- **D**: 要修正（重大な問題あり）
